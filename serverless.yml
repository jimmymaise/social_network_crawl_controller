service: on-demand-collection-services
provider:
  name: aws
  stage: dev
  runtime: python3.8
  region: us-west-2
  memorySize: 500
  environment:
    LAMBDA: "LAMBDA"
  deploymentBucket:
    name: hiip-asia-data-new # Deployment bucket name. Default is generated by the framework
    maxPreviousDeploymentArtifacts: 10 # On every deployment the framework prunes the bucket to remove artifacts older than this limit. The default is 5

package:
  include:
    - ./core/**
    - ./config/**
    - ./main.py
    - ./social_networks/**
    - '!**/.pytest_cache/**'
    - '!**/__pycache__/**'
  exclude:
    - ./**

plugins:
  - serverless-pseudo-parameters
  - serverless-python-requirements

custom:
  pythonRequirements:
    usePipenv: false
    useDownloadCache: false
    fileName: requirements.txt
    useStaticCache: true
    dockerizePip: non-linux
    zip: true
    noDeploy:
      - pytest

functions:
  - on_demand_collection_services:
      name:
      handler: main.lambda_handler
      description: on_demand_collection_services
      runtime: python3.8
      memorySize: 128
      timeout: 120
      events:
        # Provide the ARN of your queue. It will trigger this lambda
        - sqs: arn:aws:sqs:us-west-2:450253548902:user-collection